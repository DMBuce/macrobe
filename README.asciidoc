
== Install

Drop the scripts in your `$PATH`,
make them executable,
and make sure http://xmacro.sourceforge.net/[xmacro],
perl and bash 4.3+ are installed.

== Configure

To generate a default config at `~/.config/macro/config.ini`,
run any macro command such as `macro list`.

The `[genmacro]` section of the config
has a mapping of characters to keysym sequences.
To use `genmacro` to generate an xmacro script from text,
these need to be adjusted to match your keyboard layout.
You can use `xev` and press a key to see its keysym.

Users of https://i3wm.org/[i3]
may want to uncomment the `record_pre` and `loop_pre` options
in the default config
and add the following modes to i3's config:

 # record/loop modes
 set $rmacromode (Esc) Stop Recording
 set $lmacromode (Esc) Stop Macro
 mode "$rmacromode" {
     # cancel
     bindsym Escape mode "default"
 }
 mode "$lmacromode" {
     # cancel
     bindsym Escape exec macro kill; mode "default"
 }

In addition to displaying handy indicators
when running `macro record` and `macro loop`,
this setup lets you break out of `macro loop` using the Escape key,
which will run `macro kill`.

Users who don't have the above setup
will need to find another way to launch `macro kill`
when `macro loop` is running.

For users who want a simple GUI,
here is an example config for https://github.com/Blezzing/blezz[blezz]
or https://github.com/davatorium/rofi-blezz[rofi-blezz]:

 Macro:
 act(r,Record, macro record)
 act(e,Edit, urxvt -e macro edit)
 act(p,Play, macro play)
 act(l,Loop, macro loop)
 act(c,Custom, macro play my-custom-macro)

image::https://i.imgur.com/f7cxz0v.png[Blezz Menu]

Macros are stored in `~/.config/macro/macros/`.

== Usage

 $ macro
 Syntax: macro list|kill
         macro record|edit|play|loop [template]
         macro <template>
 
 Manage xmacro macros.
 

Record a macro to `~/.config/macro/macros/tmp.*`:

 macro record

List all macros:

 macro list

Edit the most recent `tmp.*` macro with your `$EDITOR` (`vi` by default):

 macro edit

Play the most recent `tmp.*` macro:

 macro play

Play the most recent `tmp.*` macro on repeat:

 macro loop

Kill all macro and xmacroplay processes:

 macro kill

Record/edit/play/loop a macro at `~/.config/macro/macros/my-custom-macro`:

 macro record my-custom-macro
 macro edit my-custom-macro
 macro play my-custom-macro # or macro my-custom-macro
 macro loop my-custom-macro

Convert a text file to a macro:

 genmacro file.txt > ~/.config/macro/macros/my-custom-macro

// vim: ft=asciidoc:
